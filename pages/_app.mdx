# app

{/* <!-- markdownlint-disable --> */}

import React, { useEffect } from 'react';
import mediumZoom from 'medium-zoom';
import { useRouter } from 'next/router';
import '../style.css';

export default function App({ Component, pageProps }) {
  const { route } = useRouter();

useEffect(() => {
let zoom;

    const init = () => {
      zoom = mediumZoom('.nextra-content img', {
        margin: 12,
        background: '#fff',
        scrollOffset: 0,
      });

      window.zoom = zoom;
    };

    setTimeout(() => {
      init();
    }, 1000);

    return () => {
      zoom?.detach();
    };

}, [route]);

useEffect(() => {
if('serviceWorker' in navigator) {
console.log('serviceWorker:register');
navigator.serviceWorker.register('/service-worker.js', { scope: '/' });

      navigator.serviceWorker.ready
        .then((registration) => {

          // sync
          console.log('serviceWorker:ready', registration);
          registration.sync.register('sync:page');

          // update
          // setTimeout(() => {
          //   console.log('serviceWorker:updating');
          //   registration.update();
          // }, 5000);
        });
    }

}, []);

return <Component {...pageProps} />;
}
